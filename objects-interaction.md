# ONDC Data Ownership and Modification Matrix

## Legend
- ✓ : Maintains/Creates
- 🔄 : Updates
- 📖 : Read-only access
- ❌ : No access
- 🔒 : Validates

## 1. Context Object

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| domain | ✓ | 🔒 | Buyer initiates, Seller validates | All API calls require context |
| action | ✓ | 🔒 | Set by Buyer based on API call | All API calls |
| country | ✓ | 🔒 | Must be ISO 3166-1 format | All API calls |
| city | ✓ | 🔒 | Cannot be '*' for search | All API calls |
| core_version | ✓ | 🔒 | Must match between both | All API calls |
| bap_id | ✓ | 📖 | Buyer's unique identifier | All API calls |
| bap_uri | ✓ | 📖 | Buyer's callback URI | All API calls |
| bpp_id | 📖 | ✓ | Seller's unique identifier | All API calls |
| bpp_uri | 📖 | ✓ | Seller's callback URI | All API calls |
| transaction_id | ✓ | 📖 | Generated by Buyer | All API calls |
| message_id | ✓ | 📖 | Generated by Buyer | All API calls |
| timestamp | ✓ | 🔒 | RFC3339 format | All API calls |

## 2. Order Object

### 2.1 Core Order Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| id | ✓ | 📖 | Generated by Buyer | Create: /init <br> Read: /status <br> Update: /update |
| state | 📖 | ✓ | Managed by Seller | Create: /on_init <br> Update: /on_status, /on_update |
| created_at | ✓ | 📖 | Initial creation timestamp | Create: /init |
| updated_at | 🔄 | 🔄 | Both can update | Update: /update, /on_update |

### 2.2 Provider Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| credentials | 📖 | ✓ | Provider credentials | Create: /on_search |
| time.label | 📖 | ✓ | Enable/Disable status | Create: /on_search <br> Update: /on_status |
| time.timestamp | 📖 | ✓ | Status timestamp | Create: /on_search <br> Update: /on_status |
| time.schedule.holidays | 📖 | ✓ | Holiday calendar | Create: /on_search |
| rating | 📖 | ✓ | Provider rating | Create: /on_search |
|-----------|-----------|------------|--------|----------------|
| provider.id | 📖 | ✓ | Set by Seller | Create: /on_search <br> Read: /search |
| descriptor | 📖 | ✓ | Full provider details | Create: /on_search <br> Update: /on_update |
| fssai_license_no | 📖 | ✓ | Compliance requirement | Create: /on_search |
| categories | 📖 | ✓ | Catalog organization | Create: /on_search |
| locations | 📖 | ✓ | Store/fulfillment locations | Create: /on_search <br> Update: /on_status |
| time | 📖 | ✓ | Operating hours | Create: /on_search <br> Update: /on_status |

### 2.3 Items

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| @ondc/org/statutory_reqs_packaged_commodities | 📖 | ✓ | Packaging details | Create: /on_search |
| @ondc/org/statutory_reqs_prepackaged_food | 📖 | ✓ | Food packaging info | Create: /on_search |
| @ondc/org/contact_details_consumer_care | 📖 | ✓ | Support contact | Create: /on_search |
| tags.veg_nonveg | 📖 | ✓ | Food classification | Create: /on_search |
| tags.origin | 📖 | ✓ | Item origin | Create: /on_search |
|-----------|-----------|------------|--------|----------------|
| id | 📖 | ✓ | Item identifier | Create: /on_search <br> Read: /select |
| parent_item_id | 🔄 | ✓ | For customizations | Create: /init <br> Update: /on_init |
| quantity.count | 🔄 | 🔄 | Both update based on flow | Update: /select, /on_select <br> Modify: /update, /on_update |
| fulfillment_id | 🔄 | ✓ | Linked to fulfillment | Create: /init <br> Update: /on_init |
| price | 📖 | ✓ | Set by Seller | Create: /on_search <br> Update: /on_select |
| available_quantity | 📖 | ✓ | Inventory management | Create: /on_search <br> Update: /on_status |
| time_to_ship | 📖 | ✓ | Delivery estimation | Create: /on_search <br> Update: /on_status |
| returnable | 📖 | ✓ | Return policy | Create: /on_search |
| cancellable | 📖 | ✓ | Cancellation policy | Create: /on_search |
| statutory_details | 📖 | ✓ | Compliance information | Create: /on_search |

### 2.4 Billing Information

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| name | ✓ | 📖 | Customer details | Create: /init <br> Update: /update |
| phone | ✓ | 📖 | Contact information | Create: /init <br> Update: /update |
| email | ✓ | 📖 | Contact information | Create: /init <br> Update: /update |
| address | ✓ | 📖 | Billing address | Create: /init <br> Update: /update |
| tax_number | ✓ | 🔒 | GST details | Create: /init |
| created_at | ✓ | 📖 | Billing creation time | Create: /init |
| updated_at | 🔄 | 📖 | Billing updates | Update: /update |

### 2.5 Fulfillment Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| instructions.code | 📖 | ✓ | Delivery instructions | Create: /on_confirm <br> Update: /on_status |
| instructions.images | 📖 | ✓ | Support images | Create: /on_confirm <br> Update: /on_status |
| instructions.long_desc | 📖 | ✓ | Detailed instructions | Create: /on_confirm <br> Update: /on_status |
| agent.name | 📖 | ✓ | Delivery agent details | Create: /on_status <br> Update: /on_status |
| agent.phone | 📖 | ✓ | Agent contact | Create: /on_status <br> Update: /on_status |
| vehicle.category | 📖 | ✓ | Delivery vehicle type | Create: /on_status <br> Update: /on_status |
| tags.status | 📖 | ✓ | Fulfillment status codes | Create: /on_status <br> Update: /on_status |
|-----------|-----------|------------|--------|----------------|
| id | 📖 | ✓ | Fulfillment identifier | Create: /on_search <br> Update: /on_status |
| type | 📖 | ✓ | Delivery/Return/Cancel | Create: /on_search |
| tracking | 📖 | ✓ | Tracking enablement | Create: /on_confirm <br> Update: /on_track |
| provider_name | 📖 | ✓ | Logistics provider | Create: /on_search <br> Update: /on_status |
| TAT | 📖 | ✓ | Delivery time estimate | Create: /on_search <br> Update: /on_status |
| state | 📖 | ✓ | Fulfillment status | Update: /on_status, /on_update |
| end_location | ✓ | 📖 | Delivery address | Create: /init <br> Update: /update |
| start_location | 📖 | ✓ | Pickup location | Create: /on_search <br> Update: /on_status |

### 2.6 Quote Information

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| price.currency | 📖 | ✓ | Currency code | Create: /on_select <br> Update: /on_update |
| price.value | 📖 | ✓ | Total amount | Create: /on_select <br> Update: /on_update |
| breakup | 📖 | ✓ | Price components | Create: /on_select <br> Update: /on_update |
| ttl | 📖 | ✓ | Quote validity | Create: /on_select <br> Update: /on_update |

### 2.7 Payment Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| @ondc/org/settlement_basis | 📖 | ✓ | Settlement basis | Create: /on_init <br> Update: /on_status |
| @ondc/org/settlement_window | 📖 | ✓ | Settlement window | Create: /on_init <br> Update: /on_status |
| @ondc/org/withholding_amount | 📖 | ✓ | Withholding amount | Create: /on_init <br> Update: /on_status |
| @ondc/org/settlement_details[].settlement_status | 📖 | ✓ | Settlement status | Create: /on_init <br> Update: /on_status |
| @ondc/org/settlement_details[].settlement_timestamp | 📖 | ✓ | Settlement time | Create: /on_init <br> Update: /on_status |
|-----------|-----------|------------|--------|----------------|
| type | ✓ | 🔒 | Payment method | Create: /init <br> Update: /update |
| collected_by | 📖 | ✓ | Collection responsibility | Create: /on_init |
| status | 🔄 | 🔄 | Payment status | Update: /update, /on_update |
| params | ✓ | 🔒 | Transaction details | Create: /init <br> Update: /update |
| settlement_details | 📖 | ✓ | Settlement information | Create: /on_init <br> Update: /on_update |
| finder_fee | ✓ | 🔒 | BAP finder fee | Create: /init |

## 3. Tracking Information

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| tracking_id | 📖 | ✓ | Unique tracking ID | Create: /on_confirm <br> Update: /on_track |
| url | 📖 | ✓ | Tracking URL | Create: /on_confirm <br> Update: /on_track |
| status | 📖 | ✓ | Current status | Update: /on_status, /on_track |
| location_updates | 📖 | ✓ | Real-time updates | Update: /on_track |

## 4. Cancellation Management

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| cancellation_terms[].fulfillment_state | 📖 | ✓ | State at cancellation | Create: /on_confirm |
| cancellation_terms[].refund_eligible | 📖 | ✓ | Refund eligibility | Create: /on_confirm |
| cancellation_terms[].return_eligible | 📖 | ✓ | Return eligibility | Create: /on_confirm |
| cancellation_terms[].reason_required | 📖 | ✓ | Reason requirement | Create: /on_confirm |
| cancellation_terms[].linked_terms | 📖 | ✓ | Related policies | Create: /on_confirm |
|-----------|-----------|------------|--------|----------------|
| cancellation_rid | ✓ | 🔒 | Reason identifier | Create: /cancel |
| cancelled_by | ✓ | ✓ | Cancelling party | Create: /cancel, /on_cancel |
| reason | ✓ | ✓ | Cancellation reason | Create: /cancel, /on_cancel |
| refund_amount | 📖 | ✓ | Refund calculation | Create: /on_cancel |

## 5. Search/Discovery

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| catalog | 📖 | ✓ | Product catalog | Create: /on_search |
| categories | 📖 | ✓ | Category organization | Create: /on_search |
| providers | 📖 | ✓ | Provider information | Create: /on_search |
| offers | 📖 | ✓ | Active offers | Create: /on_search |

## 6. State Management

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| order_state | 📖 | ✓ | Order lifecycle | Update: /on_status, /on_update |
| payment_state | 🔄 | 🔄 | Payment status | Update: /update, /on_update |
| fulfillment_state | 📖 | ✓ | Delivery status | Update: /on_status, /on_track |
| return_state | 🔄 | ✓ | Return status | Create: /return <br> Update: /on_return_status |
| settlement_state | 📖 | ✓ | Settlement status | Update: /on_status |

## Notes

1. **Data Flow Patterns**
   - Buyer App initiates most transactions
   - Seller App controls inventory and fulfillment
   - Both maintain state copies
   - Updates flow through callbacks

2. **Critical Validations**
   - Both sides validate schema compliance
   - Seller validates business rules
   - Buyer validates user inputs
   - Both validate payment flows

3. **Compliance Requirements**
   - Both maintain audit logs
   - Both ensure data retention
   - Both handle sensitive data
   - Both implement security measures

4. **API Patterns**
   - /init, /select, /confirm initiate workflows
   - /on_{action} are callback responses
   - /update modifies existing records
   - /status retrieves current state
