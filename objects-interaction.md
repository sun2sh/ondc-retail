# ONDC Data Ownership and Modification Matrix

## Legend
- âœ“ : Maintains/Creates
- ğŸ”„ : Updates
- ğŸ“– : Read-only access
- âŒ : No access
- ğŸ”’ : Validates

## 1. Context Object

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| domain | âœ“ | ğŸ”’ | Buyer initiates, Seller validates | All API calls require context |
| action | âœ“ | ğŸ”’ | Set by Buyer based on API call | All API calls |
| country | âœ“ | ğŸ”’ | Must be ISO 3166-1 format | All API calls |
| city | âœ“ | ğŸ”’ | Cannot be '*' for search | All API calls |
| core_version | âœ“ | ğŸ”’ | Must match between both | All API calls |
| bap_id | âœ“ | ğŸ“– | Buyer's unique identifier | All API calls |
| bap_uri | âœ“ | ğŸ“– | Buyer's callback URI | All API calls |
| bpp_id | ğŸ“– | âœ“ | Seller's unique identifier | All API calls |
| bpp_uri | ğŸ“– | âœ“ | Seller's callback URI | All API calls |
| transaction_id | âœ“ | ğŸ“– | Generated by Buyer | All API calls |
| message_id | âœ“ | ğŸ“– | Generated by Buyer | All API calls |
| timestamp | âœ“ | ğŸ”’ | RFC3339 format | All API calls |

## 2. Order Object

### 2.1 Core Order Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| id | âœ“ | ğŸ“– | Generated by Buyer | Create: /init <br> Read: /status <br> Update: /update |
| state | ğŸ“– | âœ“ | Managed by Seller | Create: /on_init <br> Update: /on_status, /on_update |
| created_at | âœ“ | ğŸ“– | Initial creation timestamp | Create: /init |
| updated_at | ğŸ”„ | ğŸ”„ | Both can update | Update: /update, /on_update |

### 2.2 Provider Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| credentials | ğŸ“– | âœ“ | Provider credentials | Create: /on_search |
| time.label | ğŸ“– | âœ“ | Enable/Disable status | Create: /on_search <br> Update: /on_status |
| time.timestamp | ğŸ“– | âœ“ | Status timestamp | Create: /on_search <br> Update: /on_status |
| time.schedule.holidays | ğŸ“– | âœ“ | Holiday calendar | Create: /on_search |
| rating | ğŸ“– | âœ“ | Provider rating | Create: /on_search |
|-----------|-----------|------------|--------|----------------|
| provider.id | ğŸ“– | âœ“ | Set by Seller | Create: /on_search <br> Read: /search |
| descriptor | ğŸ“– | âœ“ | Full provider details | Create: /on_search <br> Update: /on_update |
| fssai_license_no | ğŸ“– | âœ“ | Compliance requirement | Create: /on_search |
| categories | ğŸ“– | âœ“ | Catalog organization | Create: /on_search |
| locations | ğŸ“– | âœ“ | Store/fulfillment locations | Create: /on_search <br> Update: /on_status |
| time | ğŸ“– | âœ“ | Operating hours | Create: /on_search <br> Update: /on_status |

### 2.3 Items

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| @ondc/org/statutory_reqs_packaged_commodities | ğŸ“– | âœ“ | Packaging details | Create: /on_search |
| @ondc/org/statutory_reqs_prepackaged_food | ğŸ“– | âœ“ | Food packaging info | Create: /on_search |
| @ondc/org/contact_details_consumer_care | ğŸ“– | âœ“ | Support contact | Create: /on_search |
| tags.veg_nonveg | ğŸ“– | âœ“ | Food classification | Create: /on_search |
| tags.origin | ğŸ“– | âœ“ | Item origin | Create: /on_search |
|-----------|-----------|------------|--------|----------------|
| id | ğŸ“– | âœ“ | Item identifier | Create: /on_search <br> Read: /select |
| parent_item_id | ğŸ”„ | âœ“ | For customizations | Create: /init <br> Update: /on_init |
| quantity.count | ğŸ”„ | ğŸ”„ | Both update based on flow | Update: /select, /on_select <br> Modify: /update, /on_update |
| fulfillment_id | ğŸ”„ | âœ“ | Linked to fulfillment | Create: /init <br> Update: /on_init |
| price | ğŸ“– | âœ“ | Set by Seller | Create: /on_search <br> Update: /on_select |
| available_quantity | ğŸ“– | âœ“ | Inventory management | Create: /on_search <br> Update: /on_status |
| time_to_ship | ğŸ“– | âœ“ | Delivery estimation | Create: /on_search <br> Update: /on_status |
| returnable | ğŸ“– | âœ“ | Return policy | Create: /on_search |
| cancellable | ğŸ“– | âœ“ | Cancellation policy | Create: /on_search |
| statutory_details | ğŸ“– | âœ“ | Compliance information | Create: /on_search |

### 2.4 Billing Information

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| name | âœ“ | ğŸ“– | Customer details | Create: /init <br> Update: /update |
| phone | âœ“ | ğŸ“– | Contact information | Create: /init <br> Update: /update |
| email | âœ“ | ğŸ“– | Contact information | Create: /init <br> Update: /update |
| address | âœ“ | ğŸ“– | Billing address | Create: /init <br> Update: /update |
| tax_number | âœ“ | ğŸ”’ | GST details | Create: /init |
| created_at | âœ“ | ğŸ“– | Billing creation time | Create: /init |
| updated_at | ğŸ”„ | ğŸ“– | Billing updates | Update: /update |

### 2.5 Fulfillment Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| instructions.code | ğŸ“– | âœ“ | Delivery instructions | Create: /on_confirm <br> Update: /on_status |
| instructions.images | ğŸ“– | âœ“ | Support images | Create: /on_confirm <br> Update: /on_status |
| instructions.long_desc | ğŸ“– | âœ“ | Detailed instructions | Create: /on_confirm <br> Update: /on_status |
| agent.name | ğŸ“– | âœ“ | Delivery agent details | Create: /on_status <br> Update: /on_status |
| agent.phone | ğŸ“– | âœ“ | Agent contact | Create: /on_status <br> Update: /on_status |
| vehicle.category | ğŸ“– | âœ“ | Delivery vehicle type | Create: /on_status <br> Update: /on_status |
| tags.status | ğŸ“– | âœ“ | Fulfillment status codes | Create: /on_status <br> Update: /on_status |
|-----------|-----------|------------|--------|----------------|
| id | ğŸ“– | âœ“ | Fulfillment identifier | Create: /on_search <br> Update: /on_status |
| type | ğŸ“– | âœ“ | Delivery/Return/Cancel | Create: /on_search |
| tracking | ğŸ“– | âœ“ | Tracking enablement | Create: /on_confirm <br> Update: /on_track |
| provider_name | ğŸ“– | âœ“ | Logistics provider | Create: /on_search <br> Update: /on_status |
| TAT | ğŸ“– | âœ“ | Delivery time estimate | Create: /on_search <br> Update: /on_status |
| state | ğŸ“– | âœ“ | Fulfillment status | Update: /on_status, /on_update |
| end_location | âœ“ | ğŸ“– | Delivery address | Create: /init <br> Update: /update |
| start_location | ğŸ“– | âœ“ | Pickup location | Create: /on_search <br> Update: /on_status |

### 2.6 Quote Information

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| price.currency | ğŸ“– | âœ“ | Currency code | Create: /on_select <br> Update: /on_update |
| price.value | ğŸ“– | âœ“ | Total amount | Create: /on_select <br> Update: /on_update |
| breakup | ğŸ“– | âœ“ | Price components | Create: /on_select <br> Update: /on_update |
| ttl | ğŸ“– | âœ“ | Quote validity | Create: /on_select <br> Update: /on_update |

### 2.7 Payment Details

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| @ondc/org/settlement_basis | ğŸ“– | âœ“ | Settlement basis | Create: /on_init <br> Update: /on_status |
| @ondc/org/settlement_window | ğŸ“– | âœ“ | Settlement window | Create: /on_init <br> Update: /on_status |
| @ondc/org/withholding_amount | ğŸ“– | âœ“ | Withholding amount | Create: /on_init <br> Update: /on_status |
| @ondc/org/settlement_details[].settlement_status | ğŸ“– | âœ“ | Settlement status | Create: /on_init <br> Update: /on_status |
| @ondc/org/settlement_details[].settlement_timestamp | ğŸ“– | âœ“ | Settlement time | Create: /on_init <br> Update: /on_status |
|-----------|-----------|------------|--------|----------------|
| type | âœ“ | ğŸ”’ | Payment method | Create: /init <br> Update: /update |
| collected_by | ğŸ“– | âœ“ | Collection responsibility | Create: /on_init |
| status | ğŸ”„ | ğŸ”„ | Payment status | Update: /update, /on_update |
| params | âœ“ | ğŸ”’ | Transaction details | Create: /init <br> Update: /update |
| settlement_details | ğŸ“– | âœ“ | Settlement information | Create: /on_init <br> Update: /on_update |
| finder_fee | âœ“ | ğŸ”’ | BAP finder fee | Create: /init |

## 3. Tracking Information

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| tracking_id | ğŸ“– | âœ“ | Unique tracking ID | Create: /on_confirm <br> Update: /on_track |
| url | ğŸ“– | âœ“ | Tracking URL | Create: /on_confirm <br> Update: /on_track |
| status | ğŸ“– | âœ“ | Current status | Update: /on_status, /on_track |
| location_updates | ğŸ“– | âœ“ | Real-time updates | Update: /on_track |

## 4. Cancellation Management

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| cancellation_terms[].fulfillment_state | ğŸ“– | âœ“ | State at cancellation | Create: /on_confirm |
| cancellation_terms[].refund_eligible | ğŸ“– | âœ“ | Refund eligibility | Create: /on_confirm |
| cancellation_terms[].return_eligible | ğŸ“– | âœ“ | Return eligibility | Create: /on_confirm |
| cancellation_terms[].reason_required | ğŸ“– | âœ“ | Reason requirement | Create: /on_confirm |
| cancellation_terms[].linked_terms | ğŸ“– | âœ“ | Related policies | Create: /on_confirm |
|-----------|-----------|------------|--------|----------------|
| cancellation_rid | âœ“ | ğŸ”’ | Reason identifier | Create: /cancel |
| cancelled_by | âœ“ | âœ“ | Cancelling party | Create: /cancel, /on_cancel |
| reason | âœ“ | âœ“ | Cancellation reason | Create: /cancel, /on_cancel |
| refund_amount | ğŸ“– | âœ“ | Refund calculation | Create: /on_cancel |

## 5. Search/Discovery

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| catalog | ğŸ“– | âœ“ | Product catalog | Create: /on_search |
| categories | ğŸ“– | âœ“ | Category organization | Create: /on_search |
| providers | ğŸ“– | âœ“ | Provider information | Create: /on_search |
| offers | ğŸ“– | âœ“ | Active offers | Create: /on_search |

## 6. State Management

| Parameter | Buyer App | Seller App | Notes | API Operations |
|-----------|-----------|------------|--------|----------------|
| order_state | ğŸ“– | âœ“ | Order lifecycle | Update: /on_status, /on_update |
| payment_state | ğŸ”„ | ğŸ”„ | Payment status | Update: /update, /on_update |
| fulfillment_state | ğŸ“– | âœ“ | Delivery status | Update: /on_status, /on_track |
| return_state | ğŸ”„ | âœ“ | Return status | Create: /return <br> Update: /on_return_status |
| settlement_state | ğŸ“– | âœ“ | Settlement status | Update: /on_status |

## Notes

1. **Data Flow Patterns**
   - Buyer App initiates most transactions
   - Seller App controls inventory and fulfillment
   - Both maintain state copies
   - Updates flow through callbacks

2. **Critical Validations**
   - Both sides validate schema compliance
   - Seller validates business rules
   - Buyer validates user inputs
   - Both validate payment flows

3. **Compliance Requirements**
   - Both maintain audit logs
   - Both ensure data retention
   - Both handle sensitive data
   - Both implement security measures

4. **API Patterns**
   - /init, /select, /confirm initiate workflows
   - /on_{action} are callback responses
   - /update modifies existing records
   - /status retrieves current state
